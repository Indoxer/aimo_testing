Please reason step by step, and put your final answer within \boxed{}. Provide only one \boxed{}.
 The problem: 
For any finite set $X$, let $| X |$ denote the number of elements in $X$. Define
\[S_n = \sum | A \cap B | ,\]
where the sum is taken over all ordered pairs $(A, B)$ such that $A$ and $B$ are subsets of $\left\{ 1 , 2 , 3,  \cdots , n \right\}$ with $|A| = |B|$.
For example, $S_2 = 4$ because the sum is taken over the pairs of subsets
\[(A, B) \in \left\{ (\emptyset, \emptyset) , ( \{1\} , \{1\} ), ( \{1\} , \{2\} ) , ( \{2\} , \{1\} ) , ( \{2\} , \{2\} ) , ( \{1 , 2\} , \{1 , 2\} ) \right\} ,\]
giving $S_2 = 0 + 1 + 0 + 0 + 1 + 2 = 4$.
Let $\frac{S_{2022}}{S_{2021}} = \frac{p}{q}$, where $p$ and $q$ are relatively prime positive integers. Find the remainder when $p + q$ is divided by
1000.


To find \( S_n \), we need to sum \( |A \cap B| \) over all ordered pairs \((A, B)\) where \( A \) and \( B \) are subsets of \(\{1, 2, \ldots, n\}\) with \( |A| = |B| \). Let's start by considering the contribution of each element \( i \) in the set \(\{1, 2, \ldots, n\}\) to the sum \( S_n \).

For a fixed element \( i \), we need to count how many times \( i \) appears in the intersection \( A \cap B \) over all valid pairs \((A, B)\). The element \( i \) will be in \( A \cap B \) if and only if it is in both \( A \) and \( B \). The number of ways to choose \( A \) and \( B \) such that \( i \) is in both is the number of ways to choose the remaining elements for \( A \) and \( B \) from the remaining \( n-1 \) elements, which is \( 2^{n-1} \) for each subset size \( k \) (where \( k \) is the size of \( A \) and \( B \)).

Since \( |A| = |B| \), the number of ways to choose \( A \) and \( B \) such that \( i \) is in both is the sum of the number of ways to choose subsets of size \( k \) for \( A \) and \( B \) that include \( i \). This is given by:
\[
\sum_{k=0}^n \binom{n-1}{k-1}^2 = \sum_{k=0}^n \binom{n-1}{k}^2 = \binom{2(n-1)}{n-1}
\]
This is because the sum of the squares of binomial coefficients is given by the central binomial coefficient. Therefore, each element \( i \) contributes \( \binom{2(n-1)}{n-1} \) to the sum \( S_n \). Since there are \( n \) elements in the set, the total sum \( S_n \) is:
\[
S_n = n \binom{2(n-1)}{n-1}
\]

Now, we need to find \( \frac{S_{2022}}{S_{2021}} \):
\[
S_{2022} = 2022 \binom{2 \cdot 2021}{2021} = 2022 \binom{4042}{2021}
\]
\[
S_{2021} = 2021 \binom{2 \cdot 2020}{2020} = 2021 \binom{4040}{2020}
\]
Thus,
\[
\frac{S_{2022}}{S_{2021}} = \frac{2022 \binom{4042}{2021}}{2021 \binom{4040}{2020}} = \frac{2022}{2021} \cdot \frac{\binom{4042}{2021}}{\binom{4040}{2020}} = \frac{2022}{2021} \cdot \frac{4042! / (2021! \cdot 2021!)}{4040! / (2020! \cdot 2020!)} = \frac{2022}{2021} \cdot \frac{4042 \cdot 4041}{2021} = \frac{2022 \cdot 4042 \cdot 4041}{2021^2} = \frac{2 \cdot 4042 \cdot 4041}{2021} = \frac{2 \cdot 4042 \cdot 4041}{2021} = 8084
\]
The fraction \( \frac{S_{2022}}{S_{2021}} = 8084 \) is already in its simplest form, so \( p = 8084 \) and \( q = 1 \). Therefore, \( p + q = 8085 \), and the remainder when \( p + q \) is divided by 1000 is:
\[
8085 \mod 1000 = 85
\]
Thus, the answer is:
\[
\boxed{85}
\]

Predicted answer: N/A
Valid answer: 245